<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Demande non approuvée</title>
    <meta name="x-apple-disable-message-reformatting">
</head>
<body style="margin:0; padding:0; background-color:#0d1117; font-family:Segoe UI, Tahoma, Geneva, Verdana, sans-serif;">
    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" style="border-collapse:collapse; background-color:#0d1117;">
        <tr>
            <td align="center" style="padding:40px 12px;">
                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" style="max-width:600px; border-collapse:collapse; background-color:#161b22; border-radius:8px; overflow:hidden; box-shadow:0 4px 24px rgba(0,0,0,0.3);">

                    <!-- Header -->
                    <tr>
                        <td align="center"
                            style="
                                background-color:#05070c;
                                padding:24px 24px 20px 24px;
                                border-bottom:3px solid #f85149;
                            ">
                            <!-- Logo -->
                            <img 
                                src="https://res.cloudinary.com/ddlyoollk/image/upload/v1765410457/logo_bekyka.png"
                                alt="Logo SecureAuth+"
                                width="60"
                                height="60"
                                style="display:block; margin:0 auto 10px auto;"
                            >
                            <!-- App name -->
                            <div style="font-size:24px; font-weight:700; color:#f9fafb; letter-spacing:-0.5px; line-height:1.2;">
                                <span th:text="${appName}">SecureAuth+</span>
                            </div>
                            <!-- Subtitle -->
                            <div style="margin-top:4px; font-size:12px; color:#9ca3af;">
                                Notification de demande non approuvée
                            </div>
                        </td>
                    </tr>

                    <!-- Content -->
                    <tr>
                        <td style="padding:32px 24px 32px 24px;">
                            <h2 style="margin:0 0 14px 0; color:#f0f6fc; font-size:20px; font-weight:600;">
                                Bonjour <span th:text="${firstName}">Prénom</span>,
                            </h2>

                            <p style="margin:0 0 18px 0; color:#8b949e; font-size:14px; line-height:1.6;">
                                Nous avons examiné votre demande d'inscription sur 
                                <span th:text="${appName}">SecureAuth+</span>.
                                Malheureusement, nous ne sommes pas en mesure d'approuver votre demande pour le moment.
                            </p>

                            <!-- Reason Box -->
                            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" 
                                   th:if="${reason != null and reason != ''}"
                                   style="border-collapse:collapse; background-color:rgba(248,81,73,0.1); border:1px solid #f85149; border-radius:6px; margin:0 0 20px 0;">
                                <tr>
                                    <td style="padding:14px 16px;">
                                        <div style="margin:0 0 6px 0; color:#f85149; font-size:12px; font-weight:600; text-transform:uppercase; letter-spacing:0.5px;">
                                            Raison du refus
                                        </div>
                                        <p style="margin:0; color:#f0f6fc; font-size:13px; line-height:1.5;" th:text="${reason}">
                                            Raison non spécifiée
                                        </p>
                                    </td>
                                </tr>
                            </table>

                            <p style="margin:0 0 14px 0; color:#8b949e; font-size:14px; line-height:1.6;">
                                Vous pouvez, si vous le souhaitez, soumettre une nouvelle demande en fournissant des informations complémentaires
                                ou en mettant à jour les éléments nécessaires.
                            </p>

                            <p style="margin:0 0 24px 0; color:#8b949e; font-size:14px; line-height:1.6;">
                                Si vous pensez qu'il s'agit d'une erreur ou si vous avez besoin de précisions, 
                                veuillez contacter l'administrateur de la plateforme ou le support dédié.
                            </p>

                            <p style="margin:0; color:#8b949e; font-size:14px; line-height:1.6;">
                                Cordialement,<br>
                                <strong style="color:#f0f6fc;">L'équipe <span th:text="${appName}">SecureAuth+</span></strong>
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background-color:#0d1117; border-top:1px solid #30363d; padding:18px 24px;">
                            <p style="margin:0 0 4px 0; color:#484f58; font-size:11px; line-height:1.6;">
                                Cet email a été envoyé automatiquement par 
                                <span th:text="${appName}">SecureAuth+</span>. Merci de ne pas y répondre.
                            </p>
                            <p style="margin:0; color:#484f58; font-size:11px; line-height:1.6;">
                                © <span th:text="${year}">2025</span> 
                                <span th:text="${appName}">SecureAuth+</span>. Tous droits réservés.
                            </p>
                        </td>
                    </tr>

                </table>
            </td>
        </tr>
    </table>
</body>
</html>
